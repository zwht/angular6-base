webpackJsonp([10],{391:function(t,e,i){"use strict";function a(t){s||i(796)}Object.defineProperty(e,"__esModule",{value:!0});var n=i(501),o=i(797),s=!1,r=i(141),c=a,d=r(n.a,o.a,!1,c,null,null);d.options.__file="src/views/admin/previewNews.vue",e.default=d.exports},501:function(t,e,i){"use strict";var a=i(96),n=i.n(a),o=i(142);e.a={name:"NewsPreview",data:function(){return{uploadLoading:!1,uploadHeaders:{Authorization:n.a.get("authorization")},readOnly:!1,ruleCustom:{},content:"",loadingStatus:!1,loading:!1,newsObj:{}}},created:function(){this.$route.params.id;localStorage.getItem("preview_objs")?(this.newsObj=JSON.parse(localStorage.getItem("preview_objs")),localStorage.removeItem("preview_objs")):(this.$Notice.info({title:"编辑内容丢失",desc:"刷新页面导致暂存内容未被保存，请重新进入预览"}),this.$router.push({path:"/admin/news/editnews/"+this.$route.params.id}))},computed:{uploadText:function(){return this.newsObj.logo?"替换图片":"选择图片"}},methods:{goBackEdit:function(){localStorage.setItem("edit_news",JSON.stringify(this.newsObj)),this.$router.push({path:"/admin/news/editnews/"+this.$route.params.id})},goBack:function(){this.$router.push({path:"/admin/news"})},logoSuccess:function(t){0==t.errorCode?this.newsObj.logo="/api/v1/file/downloadToLocal?filePath="+t.data[0]:this.$Notice.error("上传失败，请重新上传封面")},saveNews:function(t){var e=this;return this.newsObj.state=t,""==this.newsObj.title?void this.$Notice.error({title:"未填写新闻标题",desc:"新闻标题必填，请返回编辑页面填写！"}):""==this.newsObj.logo?void this.$Notice.error({title:"请上传新闻封面",desc:"新闻封面比船，请返回编辑页面上传！"}):void(this.newsObj.id?o.a.ajax.post("/v1/news/update",this.newsObj).then(function(t){var i=t.data,a=i.errorCode;i.data;0!==a||e.$router.push({path:"/admin/news"})}).catch(function(t){}):o.a.ajax.post("/v1/news/add",this.newsObj).then(function(t){var i=t.data,a=i.errorCode;i.data;0!==a||e.$router.push({path:"/admin/news"})}).catch(function(t){}))},getDetails:function(t){},modalSubmit:function(t){},modalCancle:function(){history.go(-1)}}}},796:function(t,e){},797:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"news-preview"},[i("div",{staticClass:"top-align"},[i("router-link",{attrs:{to:{path:"/admin/news"},"active-class":"active"}},[t._v("新闻管理")]),t._v(" "),[i("span",[t._v(">")]),t._v(" "),i("a",{on:{click:t.goBackEdit}},[t._v("新闻编辑")])],t._v(" "),i("span",[t._v(">")]),t._v(" "),i("span",[t._v("预览新闻")]),t._v(" "),i("Button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"success",icon:"android-share",loading:t.uploadLoading},on:{click:function(e){t.saveNews(1)}}},[t._v("直接发布")]),t._v(" "),i("Button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"info",icon:"android-folder-open",loading:t.uploadLoading},on:{click:function(e){t.saveNews(0)}}},[t._v("保存")]),t._v(" "),i("Button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{type:"ghost",icon:"ios-undo",loading:t.uploadLoading},on:{click:t.goBackEdit}},[t._v("返回编辑")])],2),t._v(" "),i("div",{staticClass:"new-deatil"},[i("h3",{staticClass:"newtitle"},[t._v(t._s(t.newsObj.title))]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"img-box"},[i("img",{attrs:{src:t.newsObj.logo,alt:""}})]),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.newsObj.content)}})])]),t._v(" "),i("BackTop")],1)},n=[];a._withStripped=!0;var o={render:a,staticRenderFns:n};e.a=o}});